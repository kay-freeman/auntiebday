<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Happy Birthday Aunt Trisha! üçÄ</title>

  <!-- A-Frame for the 360 ‚ÄúVR-ish‚Äù escape (loads from CDN) -->
  <script src="https://aframe.io/releases/1.7.0/aframe.min.js"></script>

  <style>
    :root{
      --bg1:#052b1f;
      --bg2:#0b5b3f;
      --paper:#fff9ef;
      --ink:#102018;
      --gold:#d7b65b;
      --gold2:#f1d78a;
      --green:#1fb56a;
      --green2:#0ea85a;
      --shadow: rgba(0,0,0,.25);
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color: var(--ink);
      background:
        radial-gradient(1200px 700px at 20% 10%, rgba(255,255,255,.08), transparent 50%),
        radial-gradient(900px 600px at 80% 30%, rgba(255,255,255,.06), transparent 55%),
        linear-gradient(140deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }

    .bg-dots{
      position:fixed; inset:0;
      pointer-events:none;
      background-image:
        radial-gradient(circle at 15% 20%, rgba(255,255,255,.15) 0 1px, transparent 2px),
        radial-gradient(circle at 65% 35%, rgba(255,255,255,.12) 0 1px, transparent 2px),
        radial-gradient(circle at 35% 75%, rgba(255,255,255,.10) 0 1px, transparent 2px),
        radial-gradient(circle at 85% 80%, rgba(255,255,255,.10) 0 1px, transparent 2px);
      opacity:.55;
      filter: blur(.1px);
    }

    main{
      max-width: 1000px;
      margin: 0 auto;
      padding: 28px 18px 60px;
      position:relative;
      z-index: 1;
    }

    .banner{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      color: rgba(255,255,255,.92);
      padding: 10px 6px 18px;
      flex-wrap:wrap;
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding: 10px 12px;
      border: 1px solid rgba(255,255,255,.18);
      border-radius: 999px;
      backdrop-filter: blur(8px);
      background: rgba(255,255,255,.08);
      box-shadow: 0 10px 24px rgba(0,0,0,.12);
      font-weight: 650;
      letter-spacing: .2px;
      user-select:none;
    }

    .card{
      position:relative;
      border-radius: 22px;
      background: var(--paper);
      box-shadow: 0 30px 70px rgba(0,0,0,.35), 0 2px 0 rgba(255,255,255,.25) inset;
      overflow:hidden;
      border: 1px solid rgba(0,0,0,.08);
    }

    /* paper texture */
    .card::before{
      content:"";
      position:absolute; inset:0;
      background-image:
        radial-gradient(circle at 20% 20%, rgba(0,0,0,.03) 0 2px, transparent 3px),
        radial-gradient(circle at 70% 30%, rgba(0,0,0,.025) 0 2px, transparent 3px),
        radial-gradient(circle at 35% 75%, rgba(0,0,0,.02) 0 2px, transparent 3px),
        linear-gradient(0deg, rgba(0,0,0,.02), transparent 35%, rgba(0,0,0,.02));
      opacity:.9;
      mix-blend-mode:multiply;
      pointer-events:none;
    }

    /* ‚ÄúCeltic knot-ish‚Äù border accents (no images) */
    .knot-frame{
      position:absolute; inset:0;
      pointer-events:none;
      opacity:.55;
      background:
        repeating-linear-gradient(90deg,
          rgba(31,181,106,.0) 0 10px,
          rgba(31,181,106,.18) 10px 12px,
          rgba(215,182,91,.12) 12px 14px,
          rgba(31,181,106,.0) 14px 24px),
        repeating-linear-gradient(0deg,
          rgba(31,181,106,.0) 0 10px,
          rgba(31,181,106,.18) 10px 12px,
          rgba(215,182,91,.12) 12px 14px,
          rgba(31,181,106,.0) 14px 24px);
      mask:
        linear-gradient(#000,#000) content-box,
        linear-gradient(#000,#000);
      -webkit-mask:
        linear-gradient(#000,#000) content-box,
        linear-gradient(#000,#000);
      padding: 14px;
      box-sizing: border-box;
      border-radius: 22px;
    }

    .card-inner{
      padding: 34px 22px 22px;
      position:relative;
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap: 18px;
    }

    @media (max-width: 860px){
      .card-inner{ grid-template-columns: 1fr; }
    }

    .title{ margin:0 0 12px; line-height:1.08; }
    .title .en{
      font-size: clamp(34px, 4.4vw, 54px);
      font-weight: 900;
      letter-spacing: .2px;
    }
    .title .ga{
      display:block;
      margin-top: 6px;
      font-size: clamp(18px, 2.2vw, 24px);
      font-weight: 800;
      color: rgba(16,32,24,.78);
    }

    .subtitle{
      margin: 10px 0 16px;
      font-size: 16px;
      color: rgba(16,32,24,.78);
    }

    .controls{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      margin: 14px 0 8px;
    }

    button{
      border:0;
      cursor:pointer;
      padding: 11px 14px;
      border-radius: 12px;
      font-weight: 800;
      letter-spacing:.2px;
      transition: transform .08s ease, filter .15s ease;
      box-shadow: 0 10px 18px rgba(0,0,0,.12);
      user-select:none;
    }
    button:active{ transform: translateY(1px) scale(.99); }

    .btn-green{ background: linear-gradient(135deg, var(--green), var(--green2)); color:#062114; }
    .btn-gold{ background: linear-gradient(135deg, var(--gold2), var(--gold)); color:#2a1f06; }
    .btn-ghost{
      background: rgba(16,32,24,.06);
      color: rgba(16,32,24,.86);
      box-shadow: none;
      border: 1px solid rgba(16,32,24,.14);
    }

    .message-box{
      margin-top: 12px;
      border-radius: 18px;
      border: 1px dashed rgba(16,32,24,.22);
      background: rgba(255,255,255,.6);
      padding: 16px 14px;
      min-height: 122px;
      position:relative;
    }

    .type{ margin:0; font-size: 17px; line-height: 1.55; white-space: pre-wrap; }
    .type .cursor{
      display:inline-block;
      width: 10px;
      height: 1em;
      border-left: 2px solid rgba(16,32,24,.55);
      transform: translateY(2px);
      animation: blink 0.9s infinite;
      margin-left:2px;
    }
    @keyframes blink{ 50%{ opacity:0; } }

    .side{
      border-radius: 18px;
      border: 1px solid rgba(16,32,24,.10);
      background:
        radial-gradient(500px 300px at 25% 20%, rgba(31,181,106,.16), transparent 60%),
        radial-gradient(420px 260px at 70% 75%, rgba(215,182,91,.14), transparent 60%),
        rgba(255,255,255,.45);
      padding: 16px;
      position:relative;
      overflow:hidden;
    }

    .side h3{ margin: 0 0 8px; font-size: 18px; letter-spacing:.2px; }
    .fact{ margin:0 0 12px; color: rgba(16,32,24,.78); font-size: 14.5px; line-height:1.45; }

    .toast{
      margin-top: 10px;
      padding: 12px;
      border-radius: 14px;
      border: 1px solid rgba(16,32,24,.10);
      background: rgba(255,255,255,.55);
      font-size:14px;
      color: rgba(16,32,24,.82);
      line-height:1.45;
    }

    .tiny{
      margin-top:10px;
      font-size: 12.5px;
      color: rgba(16,32,24,.72);
    }

    footer{
      margin-top: 16px;
      color: rgba(255,255,255,.75);
      font-size: 13px;
      text-align:center;
    }

    /* Floating clovers */
    .floaties{
      position:absolute; inset:-20px -20px auto -20px;
      height: 200px;
      pointer-events:none;
      opacity:.82;
    }
    .floater{
      position:absolute;
      font-size: 22px;
      filter: drop-shadow(0 10px 10px rgba(0,0,0,.15));
      animation: drift 9s linear infinite;
      opacity: .75;
    }
    @keyframes drift{
      from { transform: translateY(10px) translateX(0) rotate(0deg); }
      to   { transform: translateY(170px) translateX(30px) rotate(20deg); }
    }

    /* Confetti (clovers) */
    .confetti{
      position:fixed; inset:0;
      pointer-events:none; overflow:hidden;
      z-index: 999;
    }
    .confetti span{
      position:absolute; top:-20px;
      font-size: 18px;
      animation: fall linear forwards;
      filter: drop-shadow(0 10px 8px rgba(0,0,0,.18));
    }
    @keyframes fall{
      to { transform: translateY(calc(100vh + 40px)) rotate(360deg); opacity:0.95; }
    }

    /* Sparkles */
    .sparkle{
      position:fixed;
      pointer-events:none;
      font-size: 16px;
      animation: pop 800ms ease-out forwards;
      z-index: 1000;
      filter: drop-shadow(0 10px 10px rgba(0,0,0,.22));
    }
    @keyframes pop{
      0% { transform: translate(-50%, -50%) scale(.6); opacity:0; }
      30%{ opacity:1; }
      100%{ transform: translate(-50%, -80%) scale(1.15); opacity:0; }
    }

    /* Leprechaun mini-game */
    .leprechaun{
      position:absolute;
      right: 16px;
      bottom: 18px;
      font-size: 26px;
      cursor:pointer;
      user-select:none;
      filter: drop-shadow(0 10px 10px rgba(0,0,0,.18));
      transform: rotate(-6deg);
      transition: transform .08s ease;
    }
    .leprechaun:active{ transform: rotate(-6deg) scale(.98); }
    .lepre-bubble{
      position:absolute;
      right: 16px;
      bottom: 56px;
      max-width: 240px;
      background: rgba(255,255,255,.85);
      border: 1px solid rgba(16,32,24,.12);
      border-radius: 14px;
      padding: 10px 10px;
      font-size: 13px;
      color: rgba(16,32,24,.82);
      box-shadow: 0 14px 30px rgba(0,0,0,.12);
      display:none;
    }

    /* Modal for ‚ÄúIreland Escape‚Äù */
    .modal-backdrop{
      position:fixed; inset:0;
      background: rgba(0,0,0,.55);
      display:none;
      align-items:center;
      justify-content:center;
      z-index: 2000;
      padding: 18px;
    }
    .modal{
      width: min(980px, 100%);
      background: rgba(255,255,255,.96);
      border-radius: 18px;
      border: 1px solid rgba(0,0,0,.18);
      box-shadow: 0 30px 90px rgba(0,0,0,.45);
      overflow:hidden;
    }
    .modal-header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      padding: 12px 14px;
      background: linear-gradient(135deg, rgba(31,181,106,.18), rgba(215,182,91,.16));
      border-bottom: 1px solid rgba(0,0,0,.10);
    }
    .modal-title{
      font-weight: 900;
      letter-spacing:.2px;
    }
    .modal-actions{
      display:flex; gap: 8px; flex-wrap:wrap;
    }
    .pill{
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid rgba(16,32,24,.14);
      background: rgba(255,255,255,.7);
      font-weight: 800;
      cursor:pointer;
      font-size: 13px;
      user-select:none;
    }
    .pill.active{
      background: linear-gradient(135deg, var(--green), var(--green2));
      color: #062114;
      border-color: rgba(0,0,0,.10);
    }
    .modal-body{
      height: min(62vh, 520px);
      background: #111;
    }
    .modal-footer{
      padding: 10px 14px 14px;
      color: rgba(16,32,24,.78);
      font-size: 13px;
    }
    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size: 12px;
      padding: 2px 6px;
      border: 1px solid rgba(0,0,0,.20);
      border-bottom-width: 2px;
      border-radius: 6px;
      background: rgba(255,255,255,.9);
    }

    /* Music banner */
    .musicbar{
      margin-top: 8px;
      display:flex;
      gap:10px;
      align-items:center;
      flex-wrap:wrap;
      font-size: 13px;
      color: rgba(255,255,255,.82);
    }
    .musicbar .note{
      opacity:.9;
    }

    @media (prefers-reduced-motion: reduce){
      .floater, .confetti span, .sparkle, .type .cursor{ animation: none !important; }
    }
  </style>
</head>

<body>
  <div class="bg-dots" aria-hidden="true"></div>
  <div class="confetti" id="confetti" aria-hidden="true"></div>

  <!-- Modal: Ireland Escape -->
  <div class="modal-backdrop" id="modalBackdrop" aria-hidden="true">
    <div class="modal" role="dialog" aria-modal="true" aria-label="Ireland Escape">
      <div class="modal-header">
        <div class="modal-title">üçÄ 5-Minute Ireland Escape (VR-ish)</div>
        <div class="modal-actions">
          <div class="pill active" data-sky="pano1">Stop 1</div>
          <div class="pill" data-sky="pano2">Stop 2</div>
          <div class="pill" data-sky="pano3">Stop 3</div>
          <div class="pill" id="btnCloseModal">Close ‚úñ</div>
        </div>
      </div>

      <div class="modal-body">
        <!-- A-Frame scene -->
        <a-scene embedded vr-mode-ui="enabled: true" renderer="colorManagement: true">
          <a-assets>
            <!-- Put your 360 images in your repo and name them like this -->
            <img id="pano1" src="ireland-360-1.jpg" crossorigin="anonymous">
            <img id="pano2" src="ireland-360-2.jpg" crossorigin="anonymous">
            <img id="pano3" src="ireland-360-3.jpg" crossorigin="anonymous">
          </a-assets>

          <a-sky id="sky" src="#pano1" rotation="0 -90 0"></a-sky>

          <!-- Simple instructions text -->
          <a-entity position="0 1.6 -2.4" text="value: Drag to look around. Scroll to zoom. Click Stop 1/2/3 to travel.; align:center; width:3.2; color:#F5F1E8"></a-entity>
        </a-scene>
      </div>

      <div class="modal-footer">
        Tip: On phone, try moving the device around. On desktop, click + drag. Press <span class="kbd">ESC</span> to close.
      </div>
    </div>
  </div>

  <main>
    <div class="banner">
      <div class="badge" title="St. Patrick‚Äôs Day Birthday Mode">
        <span>‚òòÔ∏è</span>
        <span>Happy Birthday Card (Tech Nerd Edition)</span>
      </div>

      <div class="badge" id="todayBadge" title="Today">
        üìÖ <span id="todayText">March 17</span>
      </div>

      <div class="musicbar">
        <span class="note">üéª Celtic music:</span>
        <button class="btn-gold" id="btnMusic">Play</button>
        <span id="musicStatus">off</span>
      </div>
    </div>

    <!-- Audio (click-to-play) -->
    <audio id="bgm" preload="auto" loop>
      <!-- Put a file named celtic.mp3 in your repo root -->
      <source src="celtic.mp3" type="audio/mpeg">
    </audio>

    <section class="card" aria-label="Birthday card">
      <div class="knot-frame" aria-hidden="true"></div>

      <div class="floaties" aria-hidden="true">
        <div class="floater" style="left:6%; top:10px; animation-duration: 10s;">üçÄ</div>
        <div class="floater" style="left:38%; top:-8px; animation-duration: 12s; opacity:.6;">‚òòÔ∏è</div>
        <div class="floater" style="left:68%; top:18px; animation-duration: 9s; opacity:.65;">üçÄ</div>
        <div class="floater" style="left:86%; top:-6px; animation-duration: 11s; opacity:.55;">‚òòÔ∏è</div>
      </div>

      <div class="card-inner">
        <div>
          <h1 class="title">
            <span class="en">Happy Birthday, <span id="auntName">Aunt Trisha</span>! üéÇüçÄ</span>
            <span class="ga">L√° breithe sona duit!</span>
          </h1>

          <p class="subtitle">
            You hand-paint the prettiest cards‚Ä¶ I‚Äôm not a painter, so I made you one with code. üòÑ
          </p>

          <div class="controls">
            <button class="btn-green" id="btnReveal">‚ú® Reveal my message</button>
            <button class="btn-gold" id="btnConfetti">üçÄ Clover confetti</button>
            <button class="btn-ghost" id="btnEscape">üß≠ 5-minute Ireland escape</button>
            <button class="btn-ghost" id="btnHint">üßù Catch the leprechaun</button>
          </div>

          <div class="message-box" role="status" aria-live="polite">
            <p class="type">
              <span id="typedText"></span><span class="cursor" aria-hidden="true"></span>
            </p>

            <div class="lepre-bubble" id="lepreBubble"></div>
            <div class="leprechaun" id="lepre" title="Catch me if you can!">üßù‚Äç‚ôÇÔ∏è</div>
          </div>
        </div>

        <aside class="side" aria-label="Irish fun panel">
          <h3>üíö Sweet + a little chaotic</h3>
          <p class="fact">
            I owe you approximately 9,000 smiles for all your thoughtful cards over the years.
            Consider this my ‚ÄúI‚Äôm a tech nerd, I tried‚Äù love letter. ‚òòÔ∏è
          </p>

          <div class="toast">
            <strong>Irish toast:</strong><br/>
            May your pockets be heavy and your heart be light,<br/>
            may good luck pursue you each morning and night. üçª
          </div>

          <div class="tiny">
            Pro tip: turn on the music, open the Ireland escape, and pretend I‚Äôve already made it rich. ü§ù
          </div>
        </aside>
      </div>
    </section>

    <footer>
      Made with ‚òòÔ∏è + code for Aunt Trisha.
    </footer>
  </main>

  <script>
    // ---------------------------
    // CUSTOMIZE THIS MESSAGE
    // ---------------------------
    const CONFIG = {
      auntName: "Aunt Trisha",
      message: [
        "Happy St. Patrick‚Äôs Day Birthday, Aunt Trisha! üçÄ",
        "",
        "Thank you for every hand-painted card you‚Äôve ever made me.",
        "I can‚Äôt paint like you‚Ä¶ but I CAN code like a goblin with a mission.",
        "",
        "One of these days I‚Äôll be rich enough to take us all to Ireland ‚Äî",
        "but in the meantime‚Ä¶ I made you a tiny 5-minute ‚Äúescape‚Äù button. üòÑ",
        "",
        "Love you lots ‚ù§Ô∏è",
        "‚Äî your favorite tech nerd"
      ].join("\\n")
    };

    // ---------------------------
    // ELEMENTS
    // ---------------------------
    const auntNameEl = document.getElementById("auntName");
    const typedTextEl = document.getElementById("typedText");
    const btnReveal = document.getElementById("btnReveal");
    const btnConfetti = document.getElementById("btnConfetti");
    const btnEscape = document.getElementById("btnEscape");
    const btnHint = document.getElementById("btnHint");
    const confettiEl = document.getElementById("confetti");
    const todayText = document.getElementById("todayText");

    // Music
    const bgm = document.getElementById("bgm");
    const btnMusic = document.getElementById("btnMusic");
    const musicStatus = document.getElementById("musicStatus");
    let musicOn = false;

    // Modal / A-Frame
    const modalBackdrop = document.getElementById("modalBackdrop");
    const btnCloseModal = document.getElementById("btnCloseModal");
    const pills = Array.from(document.querySelectorAll(".pill[data-sky]"));
    const sky = document.getElementById("sky");

    // Leprechaun
    const lepre = document.getElementById("lepre");
    const lepreBubble = document.getElementById("lepreBubble");
    const lepreLines = [
      "You caught me! I was guarding the birthday cake. üéÇ",
      "Trade offer: you get confetti, I get‚Ä¶ absolutely nothing. ü§ù",
      "I‚Äôve seen your code. It‚Äôs‚Ä¶ powerful. Slightly alarming. ‚úÖ",
      "If you find a pot of gold, please submit a PR."
    ];

    // Typewriter
    let typing = false;
    let typedDone = false;

    auntNameEl.textContent = CONFIG.auntName;

    // Date badge
    const now = new Date();
    todayText.textContent = now.toLocaleDateString(undefined, { month: "long", day: "numeric" });

    // ---------------------------
    // FX HELPERS
    // ---------------------------
    function typewriter(text, speed=18){
      if (typing) return;
      typing = true;
      typedTextEl.textContent = "";
      let i = 0;

      const tick = () => {
        const jitter = (Math.random() < 0.08) ? 40 : 0;
        typedTextEl.textContent += text[i] ?? "";
        i++;
        if (i < text.length){
          setTimeout(tick, speed + jitter);
        } else {
          typing = false;
          typedDone = true;
        }
      };
      tick();
    }

    function spawnCloverConfetti(count=70){
      const clovers = ["üçÄ","‚òòÔ∏è"];
      const w = window.innerWidth;
      for (let i=0; i<count; i++){
        const s = document.createElement("span");
        s.textContent = clovers[Math.floor(Math.random()*clovers.length)];
        const left = Math.random() * w;
        const duration = 3 + Math.random() * 2.5;
        const delay = Math.random() * 0.35;
        const size = 14 + Math.random() * 18;
        s.style.left = left + "px";
        s.style.fontSize = size + "px";
        s.style.animationDuration = duration + "s";
        s.style.animationDelay = delay + "s";
        s.style.opacity = (0.6 + Math.random()*0.35).toFixed(2);
        confettiEl.appendChild(s);
        setTimeout(() => s.remove(), (duration + delay) * 1000 + 200);
      }
    }

    function sparkleAt(x, y){
      const sparkles = ["‚ú®","üåü","üíõ","‚≠ê"];
      const s = document.createElement("div");
      s.className = "sparkle";
      s.textContent = sparkles[Math.floor(Math.random()*sparkles.length)];
      s.style.left = x + "px";
      s.style.top = y + "px";
      document.body.appendChild(s);
      setTimeout(() => s.remove(), 900);
    }

    // ---------------------------
    // MUSIC (click-to-play)
    // ---------------------------
    async function toggleMusic(){
      try{
        if (!musicOn){
          await bgm.play();
          musicOn = true;
          btnMusic.textContent = "Pause";
          musicStatus.textContent = "on";
        } else {
          bgm.pause();
          musicOn = false;
          btnMusic.textContent = "Play";
          musicStatus.textContent = "off";
        }
      } catch (e){
        // Usually means the audio file is missing OR autoplay policy blocked.
        musicStatus.textContent = "couldn‚Äôt start (is celtic.mp3 present?)";
      }
    }
    btnMusic.addEventListener("click", toggleMusic);

    // ---------------------------
    // MODAL / ‚ÄúIRELAND ESCAPE‚Äù
    // ---------------------------
    function openModal(){
      modalBackdrop.style.display = "flex";
      modalBackdrop.setAttribute("aria-hidden", "false");
      spawnCloverConfetti(35);
    }
    function closeModal(){
      modalBackdrop.style.display = "none";
      modalBackdrop.setAttribute("aria-hidden", "true");
    }

    btnEscape.addEventListener("click", () => {
      openModal();
      sparkleAt(window.innerWidth * 0.6, 120);
    });
    btnCloseModal.addEventListener("click", closeModal);

    window.addEventListener("keydown", (e) => {
      if (e.key === "Escape") closeModal();
    });
    modalBackdrop.addEventListener("click", (e) => {
      if (e.target === modalBackdrop) closeModal();
    });

    pills.forEach(p => {
      p.addEventListener("click", () => {
        pills.forEach(x => x.classList.remove("active"));
        p.classList.add("active");
        const id = p.getAttribute("data-sky");
        sky.setAttribute("src", "#" + id);
        spawnCloverConfetti(20);
      });
    });

    // ---------------------------
    // LEPRECHAUN MINI-GAME
    // ---------------------------
    function moveLeprechaun(){
      const box = document.querySelector(".message-box");
      const r = box.getBoundingClientRect();
      const pad = 10;
      const x = pad + Math.random() * (r.width - 44 - pad);
      const y = pad + Math.random() * (r.height - 70 - pad);

      lepre.style.right = "auto";
      lepre.style.bottom = "auto";
      lepre.style.left = x + "px";
      lepre.style.top = y + "px";
    }

    function showLepreLine(){
      lepreBubble.style.display = "block";
      lepreBubble.textContent = lepreLines[Math.floor(Math.random()*lepreLines.length)];
      setTimeout(() => { lepreBubble.style.display = "none"; }, 2400);
    }

    lepre.addEventListener("click", (e) => {
      spawnCloverConfetti(60);
      sparkleAt(e.clientX, e.clientY);
      showLepreLine();
      moveLeprechaun();
    });

    btnHint.addEventListener("click", () => {
      showLepreLine();
      moveLeprechaun();
      spawnCloverConfetti(15);
    });

    // ---------------------------
    // MAIN BUTTONS
    // ---------------------------
    btnReveal.addEventListener("click", () => {
      if (typedDone) typedDone = false;
      typewriter(CONFIG.message);
      spawnCloverConfetti(40);
      // bonus: nudge leprechaun around when message reveals
      setTimeout(moveLeprechaun, 500);
    });

    btnConfetti.addEventListener("click", () => {
      spawnCloverConfetti(90);
    });

    // Click sparkles on card
    document.querySelector(".card").addEventListener("click", (e) => {
      if (e.target.tagName.toLowerCase() === "button") return;
      sparkleAt(e.clientX, e.clientY);
    });

    // Initialize leprechaun position
    setTimeout(moveLeprechaun, 250);

    // Optional: auto-reveal via ?reveal=1
    const params = new URLSearchParams(location.search);
    if (params.get("reveal") === "1"){
      typewriter(CONFIG.message);
      spawnCloverConfetti(60);
      setTimeout(() => openModal(), 900);
    }
  </script>
</body>
</html>
